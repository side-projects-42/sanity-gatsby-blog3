"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.updateLocation = updateLocation;
exports.getHints = exports.locationSetting = void 0;

var _settings = _interopRequireDefault(require("part:@sanity/base/settings"));

var _client = _interopRequireDefault(require("part:@sanity/base/client"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var storageKey = 'studio-hints';

var studioHintsSettings = _settings.default.forNamespace(storageKey);

var client = _client.default.withConfig({
  apiVersion: '1'
});

var locationSetting = studioHintsSettings.forKey('location'); // The shape of locationObject is
// {type: 'hint', id: '123lkhlkh-234kwe3-45'} || null
// It's only set if the user has "drilled down" to a specific object

exports.locationSetting = locationSetting;

function updateLocation(locationObject) {
  locationSetting.set(locationObject ? JSON.stringify(locationObject) : undefined);
}

var getHints = (templateRepoId, removeHintsArticleSlug) => {
  var uri = "/addons/dashboard/hints?templateRepoId=".concat(templateRepoId, "&removeHintsArticleSlug=").concat(removeHintsArticleSlug);
  return client.observable.request({
    uri,
    withCredentials: false
  });
};

exports.getHints = getHints;